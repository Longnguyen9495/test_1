
(function($){var isLoaded=false;$.fn.Taskbar=function(taskbarSettings){var settings=$.extend({theme:'windows7'},taskbarSettings||{});$().bind('contextmenu',function(e){return false;});$('head').append('<link href="themes/'+settings.theme+'/ribbon.css" rel="stylesheet" type="text/css" />" />');if(!isLoaded){SetupTaskbar(settings);isLoaded=true;}
function SetupTaskbar(taskbarSettings){FixTaskbarAlign();SetupTaskbarAppSubMenus();SetupTaskbarContextMenu();SetupStartMenu();}
function FixTaskbarAlign(){$('#jQueryTaskbar ul:first li img').each(function(){$(this).css('padding-top',($(this).height()/6)+'px');});}
function SetupTaskbarAppSubMenus(){$(document).click(function(){$('#jQueryTaskbar ul li.taskbar-item ul').fadeOut('fast')});$('#jQueryTaskbar ul li.taskbar-item').children('ul').each(function(){if(!$(this).parent().parent().hasClass('taskbar-start')){$(this).prepend('<li class="taskbar-submenu-left">&nbsp;</li>');$(this).append('<li class="taskbar-submenu-right">&nbsp;</li>');}});$('#jQueryTaskbar ul li.taskbar-item').mouseover(function(){if($(this).children('ul').children(':visible').length>0)return;if($('.contextContainer:visible').length>0)return;$(this).parent().children('li.taskbar-item').children('ul').fadeOut();var $ul=$(this).children('ul');if(($($ul).parent().offset().left-($ul.width()/$($ul).children('li').length))>5)
$ul.css('left',($($ul).parent().offset().left-($ul.width()/$($ul).children('li').length))+'px');else
$ul.css('left','5px');$ul.fadeIn('fast');});}
function SetupTaskbarContextMenu(){$('#jQueryTaskbar ul li.taskbar-item').bind('contextmenu',function(e){$('#jQueryTaskbar ul li ul').fadeOut('fast');$(this).children('.contextContainer').show().css({bottom:($(this).height()+5)+'px'});$(this).children('.contextContainer').children('ul').fadeIn('fast');return false;});$(document).click(function(e){$('#jQueryTaskbar .contextContainer').fadeOut();});}
function SetupStartMenu(){var visible=false;var timerfunc;$('#jQueryTaskbar .taskbar-start-shortcuts img').hide();$('#jQueryTaskbar .taskbar-start-shortcuts img:first').show();$('#jQueryTaskbar .taskbar-start-shortcuts a').hover(function(){$('#jQueryTaskbar .taskbar-start-shortcuts img:first').hide();$(this).children('img').fadeIn();},function(){$(this).children('img').fadeOut();$('#jQueryTaskbar .taskbar-start-shortcuts img:first').show();});$(document).click(function(e){if($('.taskbar-win').position().left<e.pageX&&$('.taskbar-win').position().top<e.pageY&&visible){$('.taskbar-start').fadeOut('fast');$('#jQueryTaskbar .taskbar-start').width('500px');visible=false;}});$('#jQueryTaskbar .taskbar-favorites').click(function(e){if($('.taskbar-favorites').position().left<e.pageX&&$('.taskbar-favorites').position().top<e.pageY&&visible){$('.taskbar-start-favorites').fadeOut('fast');$('.taskbar-start-favorites').width('257px');visible=false;}});$('#jQueryTaskbar .taskbar-favorites').click(function(){$('#jQueryTaskbar .taskbar-start-favorites').width('257px');$(this).children('.taskbar-start-favorites *').show();$(this).children('.taskbar-start-favorites').fadeIn('fast',function(){visible=true;});});$('#jQueryTaskbar .taskbar-start a').each(function(){if($(this).parent().children('ul').length>0){$(this).css('font-weight','bold');}});$('#jQueryTaskbar .taskbar-start li a').hover(function(){if($(this).parent().parent().parent().parent().hasClass('taskbar-start'))return;$('#jQueryTaskbar .taskbar-start-shortcuts img:first').show();$('#jQueryTaskbar .taskbar-start-shortcuts').animate({left:'250px'},500);$('#jQueryTaskbar .taskbar-start').animate({width:'400px'},500);if($(this).parent().children('ul').length>0){timerfunc=window.setTimeout("$('#jQueryTaskbar .taskbar-start-shortcuts').animate({ left: '600px' }, 250);$('#jQueryTaskbar .taskbar-start').animate({ width: '600px' }, 500);",500);}},function(){window.clearTimeout(timerfunc);});}}})(jQuery);